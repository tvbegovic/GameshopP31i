(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},zUnb:function(e,t,n){"use strict";n.r(t);var i=n("fXoL"),r=n("jhN1"),s=n("tyNb"),o=n("ofXK"),c=n("vkgz"),a=n("tk/3");let d=(()=>{class e{constructor(){this.blockUIEvent=new i.n}startBlock(){setTimeout(()=>this.blockUIEvent.emit(!0),0)}stopBlock(){setTimeout(()=>this.blockUIEvent.emit(!1),0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Fb({token:e,factory:e.\u0275fac}),e})(),l=(()=>{class e{constructor(e,t){this.http=e,this.blockUIService=t,this.tokenKey="user_token"}post(e,t){return this.blockUIService.startBlock(),this.http.post(e,t,{headers:this.BuildHeaders()}).pipe(Object(c.a)(()=>this.blockUIService.stopBlock(),()=>this.blockUIService.stopBlock()))}postNoBlock(e,t){return this.http.post(e,t,{headers:this.BuildHeaders()})}get(e,t){return this.blockUIService.startBlock(),null==t&&(t={}),t.headers=this.BuildHeaders(),this.http.get(e,t).pipe(Object(c.a)(()=>this.blockUIService.stopBlock(),()=>this.blockUIService.stopBlock()))}getNoBlock(e,t){return null==t&&(t={}),t.headers=this.BuildHeaders(),this.http.get(e,t)}put(e,t){return this.blockUIService.startBlock(),this.http.put(e,t,{headers:this.BuildHeaders()}).pipe(Object(c.a)(()=>this.blockUIService.stopBlock(),()=>this.blockUIService.stopBlock()))}putNoBlock(e,t){return this.http.put(e,t,{headers:this.BuildHeaders()})}BuildHeaders(){let e=new a.c;if(e=e.append("Content-Type","application/json; charset=utf-8"),e=e.append("Accept","q=0.8;application/json;q=0.9"),"undefined"!=typeof Storage){const t=localStorage.getItem(this.tokenKey);null!=t&&(e=e.append("Authorization","Bearer "+t))}return e}delete(e,t){return null==t&&(t={}),t.headers=this.BuildHeaders(),this.http.delete(e,t)}}return e.\u0275fac=function(t){return new(t||e)(i.Tb(a.a),i.Tb(d))},e.\u0275prov=i.Fb({token:e,factory:e.\u0275fac}),e})(),b=(()=>{class e{constructor(e){this.httpService=e,this.api="api/user/",this.tokenKey="user_token",this.userSetEvent=new i.n,this.userKey="gameshop_user"}get User(){return null==this._user&&(this._user=this.loadUser()),this._user}login(e,t){return this.httpService.get(this.api+"login",{params:{email:e,password:t}})}getCurrentUser(){return this.httpService.post(this.api+"getCurrent",null).pipe(Object(c.a)({next:e=>this.saveUser(e)}))}loadUser(){const e=localStorage.getItem(this.userKey);return null!=e?JSON.parse(e):null}saveUser(e){this._user=e,localStorage.setItem(this.userKey,JSON.stringify(e)),localStorage.setItem(this.tokenKey,e.token),this.userSetEvent.emit(e)}clearUser(){localStorage.removeItem(this.userKey),this._user=null,this.userSetEvent.emit(null)}updateUser(e){return this.httpService.post(this.api+(e.id>0?"update":"create"),e)}deleteUser(e){return this.httpService.delete(this.api+"delete?id="+e)}}return e.\u0275fac=function(t){return new(t||e)(i.Tb(l))},e.\u0275prov=i.Fb({token:e,factory:e.\u0275fac}),e})(),g=(()=>{class e{constructor(e){this.httpService=e}getError(e){return e.error instanceof Error?e.error.message:"string"==typeof e.error?e.error:e.message}deepClone(e){return JSON.parse(JSON.stringify(e))}getUploadUrl(){return"api/uploadImage"}getUploadFileUrl(){return"api/uploadFile"}getTempUrl(){return"api/getTempUrl"}uploadFile(e,t){const n=new FormData;return n.append("file",t,t.name),this.httpService.post(e,n)}getSetting(e){return this.httpService.get("api/getSetting",{params:{name:e}})}padValue(e,t=2){return e.toString().padStart(t,"0")}}return e.\u0275fac=function(t){return new(t||e)(i.Tb(l))},e.\u0275prov=i.Fb({token:e,factory:e.\u0275fac}),e})();var p=n("EDFS"),u=n("3Pt+");function m(e,t){if(1&e&&(i.Pb(0,"div",5),i.Pb(1,"a",6),i.Ac(2,"Login"),i.Ob(),i.Pb(3,"a",7),i.Ac(4,"Register"),i.Ob(),i.Ob()),2&e){i.Zb();const e=i.oc(5);i.xb(1),i.gc("popover",e),i.xb(2),i.gc("routerLink","register")}}function h(e,t){if(1&e&&(i.Pb(0,"div",8),i.Ac(1),i.Ob()),2&e){const e=i.Zb();i.xb(1),i.Cc(" ",e.user.email," ")}}function f(e,t){if(1&e&&(i.Pb(0,"div",17),i.Ac(1),i.Ob()),2&e){const e=i.Zb(2);i.xb(1),i.Bc(e.errorMessage)}}function v(e,t){if(1&e){const e=i.Qb();i.Pb(0,"div",9),i.Pb(1,"div",10),i.Ac(2,"Login"),i.Ob(),i.Pb(3,"div",11),i.yc(4,f,2,1,"div",12),i.Pb(5,"div",13),i.Pb(6,"label"),i.Ac(7,"Email:"),i.Ob(),i.Pb(8,"input",14),i.Wb("ngModelChange",function(t){return i.qc(e),i.Zb().params.email=t}),i.Ob(),i.Ob(),i.Pb(9,"div",13),i.Pb(10,"label"),i.Ac(11,"Password:"),i.Ob(),i.Pb(12,"input",15),i.Wb("ngModelChange",function(t){return i.qc(e),i.Zb().params.password=t}),i.Ob(),i.Ob(),i.Pb(13,"button",16),i.Wb("click",function(){return i.qc(e),i.Zb().login()}),i.Ac(14,"Login"),i.Ob(),i.Ob(),i.Ob()}if(2&e){const e=i.Zb();i.xb(4),i.gc("ngIf",e.errorMessage),i.xb(4),i.gc("ngModel",e.params.email),i.xb(4),i.gc("ngModel",e.params.password)}}let O=(()=>{class e{constructor(e,t){this.userService=e,this.commonService=t,this.errorMessage="",this.params={email:"",password:""},this.userService.userSetEvent.subscribe(e=>this.user=e)}ngOnInit(){this.user=this.userService.User}login(){this.userService.login(this.params.email,this.params.password).subscribe(e=>this.userService.saveUser(e),e=>this.errorMessage=this.commonService.getError(e))}}return e.\u0275fac=function(t){return new(t||e)(i.Jb(b),i.Jb(g))},e.\u0275cmp=i.Db({type:e,selectors:[["app-login-info"]],decls:6,vars:2,consts:[[1,"d-flex"],["src","assets/user.png",1,"imguser"],["class","loginlinks",4,"ngIf"],["class","userdata",4,"ngIf"],["loginpop",""],[1,"loginlinks"],["placement","bottom",1,"btn-secondary","ml-2",2,"cursor","pointer",3,"popover"],[1,"btn-secondary","ml-2",3,"routerLink"],[1,"userdata"],[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","password",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-primary","mt-1",3,"click"],[1,"alert","alert-danger"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Kb(1,"img",1),i.yc(2,m,5,2,"div",2),i.yc(3,h,2,1,"div",3),i.Ob(),i.yc(4,v,15,3,"ng-template",null,4,i.zc)),2&e&&(i.xb(2),i.gc("ngIf",!t.user),i.xb(1),i.gc("ngIf",t.user))},directives:[o.n,p.a,s.c,u.c,u.m,u.p],styles:[".loginlinks[_ngcontent-%COMP%], .userdata[_ngcontent-%COMP%]{font-size:.8em}.loginlinks[_ngcontent-%COMP%]{padding-top:32px}.loginlinks[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:6px}.imguser[_ngcontent-%COMP%]{width:48px;margin-top:8px}.userdata[_ngcontent-%COMP%]{padding-top:32px}.card-header[_ngcontent-%COMP%]{padding:.5rem .8rem;font-size:.8em}.card-body[_ngcontent-%COMP%]{padding:.5rem;font-size:.8em}.form-group[_ngcontent-%COMP%]{margin-bottom:.2rem}.btn-sm[_ngcontent-%COMP%]{font-size:.8rem}.alert[_ngcontent-%COMP%]{margin-bottom:.3rem}"]}),e})(),P=(()=>{class e{constructor(){this.items=[],this.Changed=new i.n,this.load()}add(e){const t=this.items.find(t=>t.game.id==e.id);t?t.qty++:this.items.push({game:e,qty:1}),this.save(),this.Changed.emit(this.getCount())}remove(e,t){t||(t=1);const n=this.items.findIndex(t=>t.game.id==e);if(n>=0){const e=this.items[n];e.qty-=t,e.qty<=0&&this.items.splice(n,1),this.save(),this.Changed.emit(this.getCount())}}load(){const e=localStorage.getItem("cart");e&&(this.items=JSON.parse(e),this.Changed.emit(this.getCount()))}clear(){this.items=[],this.save(),this.Changed.emit(this.getCount())}getCount(){return this.items.length}save(){localStorage.setItem("cart",JSON.stringify(this.items))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Fb({token:e,factory:e.\u0275fac}),e})(),y=(()=>{class e{constructor(e){this.cartService=e,this.count=0,e.Changed.subscribe(e=>this.count=e)}ngOnInit(){this.count=this.cartService.getCount()}}return e.\u0275fac=function(t){return new(t||e)(i.Jb(P))},e.\u0275cmp=i.Db({type:e,selectors:[["app-cart-indicator"]],decls:6,vars:2,consts:[[1,"d-flex"],[1,"holder"],[3,"routerLink"],["src","assets/cart.png",2,"width","64px"],[1,"counter"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Pb(1,"div",1),i.Pb(2,"a",2),i.Kb(3,"img",3),i.Ob(),i.Pb(4,"div",4),i.Ac(5),i.Ob(),i.Ob(),i.Ob()),2&e&&(i.xb(2),i.gc("routerLink","cart"),i.xb(3),i.Bc(t.count))},directives:[s.c],styles:[".holder[_ngcontent-%COMP%]{position:relative}.counter[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;font-weight:700}"]}),e})();function S(e,t){1&e&&i.Kb(0,"app-cart-indicator")}let C=(()=>{class e{constructor(){this.showCart=!0}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Db({type:e,selectors:[["app-header"]],inputs:{showCart:"showCart"},decls:6,vars:2,consts:[[1,"d-flex","justify-content-between"],[3,"routerLink"],["src","assets/logo.png",2,"width","400px"],[1,"d-flex"],[4,"ngIf"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Pb(1,"a",1),i.Kb(2,"img",2),i.Ob(),i.Pb(3,"div",3),i.yc(4,S,1,0,"app-cart-indicator",4),i.Kb(5,"app-login-info"),i.Ob(),i.Ob()),2&e&&(i.xb(1),i.gc("routerLink",""),i.xb(3),i.gc("ngIf",t.showCart))},directives:[s.c,o.n,O,y],styles:[""]}),e})();var M=n("44PX"),w=n("nqF2");class x{}class k{}class I{}let A=(()=>{class e{constructor(e){this.httpService=e,this.api="api/game/"}getHomeModel(){return this.httpService.get(this.api+"homeModel")}getGenres(){return this.httpService.get(this.api+"genres")}getCompanies(){return this.httpService.get(this.api+"companies")}getByGenre(e){return this.httpService.get(`${this.api}bygenre/${e}`)}getByCompany(e){return this.httpService.get(`${this.api}bycompany/${e}`)}search(e){return this.httpService.get(`${this.api}search/${e}`)}getById(e){return this.httpService.get(`${this.api}getById/${e}`)}getListModel(){return this.httpService.get(this.api+"listModel")}create(e){return this.httpService.post(this.api,e)}update(e){return this.httpService.put(this.api,e)}delete(e){return this.httpService.delete(this.api+e.toString())}}return e.\u0275fac=function(t){return new(t||e)(i.Tb(l))},e.\u0275prov=i.Fb({token:e,factory:e.\u0275fac}),e})();function B(e,t){if(1&e){const e=i.Qb();i.Pb(0,"app-grid",3),i.Wb("ButtonClicked",function(t){return i.qc(e),i.Zb().gridButtonClicked(t)}),i.Ob()}if(2&e){const e=i.Zb();i.gc("definition",e.definition)("data",e.model.games)("editMode",e.editMode)("editedRow",e.gameCopy)}}let _=(()=>{class e{constructor(e,t,n){this.gameService=e,this.commonService=t,this.messageBoxService=n,this.errorMessage="",this.editMode=w.h.NoEdit,this.editedId=0,this.definition=new w.g([new w.d("Id","id",w.e.Label,"title"),new w.d("Title","title",w.e.Label,"title"),new w.d("Genre","genre.name",w.e.Label,"genre"),new w.d("Publisher","publisher.name",w.e.Label,"publisher"),new w.d("Developer","developer.name",w.e.Label,"developer"),new w.d("Price","price",w.e.Label,"price"),new w.d("Release date","releaseDate",w.e.Label,"releaseDate"),new w.d("buttons","",w.e.ButtonGroup,"buttons",null,void 0,void 0,null,!1,void 0,null,void 0,!1,void 0,[new w.c("Update","update","fa fa-check","btn-success",!0),new w.c("Cancel","cancel","fa-times-circle-o","btn-warning ml-2"),new w.c("Edit","edit","fa-pencil","btn-secondary"),new w.c("Delete","delete","fa-remove","btn-danger ml-2")])])}ngOnInit(){this.gameService.getListModel().subscribe(e=>{this.model=e,this.postSetupGrid()},e=>this.errorMessage=this.commonService.getError(e))}postSetupGrid(){this.definition.columnButtonVisibilityCallback=this.checkColumnButtonVisibility.bind(this),this.definition.columnEditorVisibilityStatusCallback=this.checkColumnEditorVisibilityStatus.bind(this);const e=this.definition.getColumn("genre");e.editorType=w.i.Dropdown,e.dropdownData=this.model.genres,e.valueField="id",e.displayField="name",e.selectedValueField="idGenre";const t=this.definition.getColumn("publisher");t.editorType=w.i.Dropdown,t.dropdownData=this.model.companies,t.valueField="id",t.displayField="name",t.selectedValueField="idPublisher";const n=this.definition.getColumn("developer");n.editorType=w.i.Dropdown,n.dropdownData=this.model.companies,n.valueField="id",n.displayField="name",n.selectedValueField="idDeveloper"}addNew(){this.gameCopy=JSON.parse(JSON.stringify(new x)),this.gameCopy.id=0,this.editMode=w.h.AddNew,this.editedId=0}gridButtonClicked(e){"delete"===e.name?this.onDeleteRow(e.row):"edit"===e.name?(this.onEditRow(e.row),this.editMode=w.h.Edit):"cancel"===e.name?this.editMode=w.h.NoEdit:"update"===e.name&&this.onUpdateRow()}onEditRow(e){this.gameCopy=JSON.parse(JSON.stringify(e)),this.editedId=e.id}onCancelRow(){this.editedId=-1}onUpdateRow(){const e=this.gameCopy;e.genre=null,e.publisher=null,e.developer=null,e.idGenre&&(e.idGenre=parseInt(e.idGenre.toString())),e.idPublisher&&(e.idPublisher=parseInt(e.idPublisher.toString())),e.idDeveloper&&(e.idDeveloper=parseInt(e.idDeveloper.toString())),e.price&&(e.price=parseFloat(e.price.toString()));const t=0===e.id;this.errorMessage="",(t?this.gameService.create:this.gameService.update).bind(this.gameService)(e).subscribe(n=>{this.errorMessage="";let i=n;if(t)this.model.games.unshift(n);else{const t=this.model.games.find(t=>t.id===e.id);null!=t&&Object.assign(t,n),i=t}i.genre=this.model.genres.find(e=>e.id==n.idGenre),i.developer=this.model.companies.find(e=>e.id==n.idDeveloper),i.publisher=this.model.companies.find(e=>e.id==n.idPublisher),this.editMode=w.h.NoEdit},e=>this.errorMessage=this.commonService.getError(e))}onDeleteRow(e){this.messageBoxService.openDialog("Delete game?",w.k.Yesno).subscribe(t=>{t.value===w.j.Ok&&(this.errorMessage="",this.gameService.delete(e.id).subscribe(t=>{const n=this.model.games.findIndex(t=>t.id===e.id);n>=0&&this.model.games.splice(n,1)},e=>this.errorMessage=this.commonService.getError(e)))})}checkColumnButtonVisibility(e,t,n){return"edit"===n||"delete"===n?this.editMode===w.h.NoEdit||e.id!==this.gameCopy.id:"update"!==n&&"cancel"!==n||this.editMode!==w.h.NoEdit&&e.id===this.gameCopy.id}checkColumnEditorVisibilityStatus(e,t){return"id"!=t.name}}return e.\u0275fac=function(t){return new(t||e)(i.Jb(A),i.Jb(g),i.Jb(w.l))},e.\u0275cmp=i.Db({type:e,selectors:[["app-games-admin-list"]],decls:5,vars:1,consts:[[1,"mt-2"],[1,"btn","btn-primary",3,"click"],[3,"definition","data","editMode","editedRow","ButtonClicked",4,"ngIf"],[3,"definition","data","editMode","editedRow","ButtonClicked"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Pb(1,"button",1),i.Wb("click",function(){return t.addNew()}),i.Ac(2,"Add new"),i.Ob(),i.Ob(),i.Pb(3,"div",0),i.yc(4,B,1,4,"app-grid",2),i.Ob()),2&e&&(i.xb(4),i.gc("ngIf",t.model))},directives:[o.n,w.f],styles:[""]}),e})(),E=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Db({type:e,selectors:[["app-admin-home"]],decls:5,vars:1,consts:[[3,"showCart"],[1,"tabHolder"],["heading","Games"]],template:function(e,t){1&e&&(i.Kb(0,"app-header",0),i.Pb(1,"div",1),i.Pb(2,"tabset"),i.Pb(3,"tab",2),i.Kb(4,"app-games-admin-list"),i.Ob(),i.Ob(),i.Ob()),2&e&&i.gc("showCart",!1)},directives:[C,M.c,M.a,_],styles:[".tabHolder[_ngcontent-%COMP%]{margin-top:10px;padding:5px}"]}),e})();function U(e,t){1&e&&(i.Pb(0,"div",26),i.Ac(1," The Email field is required "),i.Ob())}function D(e,t){1&e&&(i.Pb(0,"div",26),i.Ac(1," The Password field is required "),i.Ob())}let F=(()=>{class e{constructor(e,t,n){this.userService=e,this.commonService=t,this.router=n,this.errorMessage="",this.params={username:"",password:""}}ngOnInit(){}login(){this.userService.login(this.params.username,this.params.password).subscribe(e=>{this.userService.saveUser(e),this.router.navigate(["admin"])},e=>this.errorMessage=this.commonService.getError(e))}checkShowValidationError(e,t){return e.invalid&&(e.dirty||e.touched||t.submitted)}}return e.\u0275fac=function(t){return new(t||e)(i.Jb(b),i.Jb(g),i.Jb(s.b))},e.\u0275cmp=i.Db({type:e,selectors:[["app-login"]],decls:35,vars:5,consts:[[1,"main","d-flex","align-items-center"],[1,"container","mt-5"],[1,"row"],[1,"col-md-6","mx-auto"],[1,"card-group"],[1,"card","p-4"],[1,"card-body"],[3,"errorMessage"],[3,"ngSubmit"],["f","ngForm"],[1,"text-muted"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"icon-user"],["type","text","placeholder","Email","name","username","autocomplete","username","required","",1,"form-control",3,"ngModel","ngModelChange"],["username","ngModel"],["class","validationbox",4,"ngIf"],[1,"icon-lock"],["type","password","placeholder","Password","autocomplete","current-password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],[1,"row","mt-2"],[1,"col-6"],["type","submit",1,"btn","btn-primary","px-4"],[1,"col-6","text-right"],["type","button",1,"btn","btn-link","px-0"],[1,"validationbox"]],template:function(e,t){if(1&e){const e=i.Qb();i.Pb(0,"main",0),i.Pb(1,"div",1),i.Pb(2,"div",2),i.Pb(3,"div",3),i.Pb(4,"div",4),i.Pb(5,"div",5),i.Pb(6,"div",6),i.Kb(7,"app-errormessage",7),i.Pb(8,"form",8,9),i.Wb("ngSubmit",function(){return i.qc(e),i.oc(9).valid&&t.login()}),i.Pb(10,"h1"),i.Ac(11,"Login"),i.Ob(),i.Pb(12,"p",10),i.Ac(13,"Sign In to your account"),i.Ob(),i.Pb(14,"div",11),i.Pb(15,"div",12),i.Pb(16,"span",13),i.Kb(17,"i",14),i.Ob(),i.Ob(),i.Pb(18,"input",15,16),i.Wb("ngModelChange",function(e){return t.params.username=e}),i.Ob(),i.Ob(),i.yc(20,U,2,0,"div",17),i.Pb(21,"div",11),i.Pb(22,"div",12),i.Pb(23,"span",13),i.Kb(24,"i",18),i.Ob(),i.Ob(),i.Pb(25,"input",19,20),i.Wb("ngModelChange",function(e){return t.params.password=e}),i.Ob(),i.Ob(),i.yc(27,D,2,0,"div",17),i.Pb(28,"div",21),i.Pb(29,"div",22),i.Pb(30,"button",23),i.Ac(31,"Login"),i.Ob(),i.Ob(),i.Pb(32,"div",24),i.Pb(33,"button",25),i.Ac(34,"Forgot password?"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob()}if(2&e){const e=i.oc(9),n=i.oc(19),r=i.oc(26);i.xb(7),i.gc("errorMessage",t.errorMessage),i.xb(11),i.gc("ngModel",t.params.username),i.xb(2),i.gc("ngIf",t.checkShowValidationError(n,e)),i.xb(5),i.gc("ngModel",t.params.password),i.xb(2),i.gc("ngIf",t.checkShowValidationError(r,e))}},directives:[w.b,u.w,u.n,u.o,u.c,u.t,u.m,u.p,o.n],styles:[".validationbox[_ngcontent-%COMP%]{color:red}"]}),e})();function G(e,t){if(1&e&&(i.Pb(0,"div",2),i.Ac(1),i.Ob()),2&e){const e=i.Zb();i.xb(1),i.Bc(e.errorMessage)}}let q=(()=>{class e{constructor(e,t,n){this.gameService=e,this.activatedRoute=t,this.commonService=n,this.errorMessage=""}ngOnInit(){this.gameService.getById(+this.activatedRoute.snapshot.params.id).subscribe(e=>this.game=e,e=>this.errorMessage=this.commonService.getError(e))}}return e.\u0275fac=function(t){return new(t||e)(i.Jb(A),i.Jb(s.a),i.Jb(g))},e.\u0275cmp=i.Db({type:e,selectors:[["app-game-detail"]],decls:3,vars:1,consts:[[1,"container"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Kb(1,"app-header"),i.yc(2,G,2,1,"div",1),i.Ob()),2&e&&(i.xb(2),i.gc("ngIf",t.errorMessage))},directives:[C,o.n],styles:[""]}),e})();class T{}let Z=(()=>{class e{constructor(){this.text="",this.SearchActivated=new i.n}ngOnInit(){}search(){this.SearchActivated.emit(this.text)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Db({type:e,selectors:[["app-search-bar"]],outputs:{SearchActivated:"SearchActivated"},decls:4,vars:1,consts:[[1,"mt-2","d-flex"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","ml-2",2,"width","100px",3,"click"],[1,"fas","fa-search"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Pb(1,"input",1),i.Wb("ngModelChange",function(e){return t.text=e}),i.Ob(),i.Pb(2,"button",2),i.Wb("click",function(){return t.search()}),i.Kb(3,"i",3),i.Ob(),i.Ob()),2&e&&(i.xb(1),i.gc("ngModel",t.text))},directives:[u.c,u.m,u.p],styles:[""]}),e})();function K(e,t){if(1&e){const e=i.Qb();i.Pb(0,"div",4),i.Pb(1,"a",5),i.Wb("click",function(){i.qc(e);const n=t.$implicit;return i.Zb().onGenreSelected(n)}),i.Ac(2),i.Ob(),i.Ob()}if(2&e){const e=t.$implicit;i.xb(2),i.Bc(e.name)}}let J=(()=>{class e{constructor(){this.GenreSelected=new i.n}ngOnInit(){}onGenreSelected(e){this.GenreSelected.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Db({type:e,selectors:[["app-genre-selector"]],inputs:{genres:"genres"},outputs:{GenreSelected:"GenreSelected"},decls:5,vars:1,consts:[[1,"card","mt-4"],[1,"card-header","header"],[1,"card-body"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Pb(1,"div",1),i.Ac(2,"\u017danr"),i.Ob(),i.Pb(3,"div",2),i.yc(4,K,3,1,"div",3),i.Ob(),i.Ob()),2&e&&(i.xb(4),i.gc("ngForOf",t.genres))},directives:[o.m],styles:[".header[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{font-size:1.1em}.header[_ngcontent-%COMP%]{font-weight:700}"]}),e})();function W(e,t){if(1&e){const e=i.Qb();i.Pb(0,"div",4),i.Pb(1,"a",5),i.Wb("click",function(){i.qc(e);const n=t.$implicit;return i.Zb().onCompanySelected(n)}),i.Ac(2),i.Ob(),i.Ob()}if(2&e){const e=t.$implicit;i.xb(2),i.Bc(e.name)}}let N=(()=>{class e{constructor(){this.CompanySelected=new i.n}ngOnInit(){}onCompanySelected(e){this.CompanySelected.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Db({type:e,selectors:[["app-company-selector"]],inputs:{companies:"companies"},outputs:{CompanySelected:"CompanySelected"},decls:5,vars:1,consts:[[1,"card","mt-4"],[1,"card-header","header"],[1,"card-body"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Pb(1,"div",1),i.Ac(2,"Developer / Izdava\u010d"),i.Ob(),i.Pb(3,"div",2),i.yc(4,W,3,1,"div",3),i.Ob(),i.Ob()),2&e&&(i.xb(4),i.gc("ngForOf",t.companies))},directives:[o.m],styles:[".header[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{font-size:1.1em}.header[_ngcontent-%COMP%]{font-weight:700}"]}),e})();var L=n("Lm2G");let z=(()=>{class e{constructor(){this.AddedToCart=new i.n}ngOnInit(){}getImageUrl(e){return`assets/gameimages/${e.image}`}getImageUrlBg(e){return`background: url("assets/gameimages/${e.image}") center center / 100% 150px no-repeat;`}addToCart(){this.AddedToCart.emit(this.game)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Db({type:e,selectors:[["app-game-list-element"]],inputs:{game:"game"},outputs:{AddedToCart:"AddedToCart"},decls:12,vars:4,consts:[[1,"game_element"],[1,"imageHolder"],["href","#"],[1,"title"],[1,"pricecart","mb-2"],[1,"price"],[1,"cart","ml-2","mr-2"],[2,"cursor","pointer",3,"click"],["src","assets/cart-add-icon.png"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Pb(1,"div",1),i.Kb(2,"a",2),i.Ob(),i.Pb(3,"div",3),i.Pb(4,"a",2),i.Ac(5),i.Ob(),i.Ob(),i.Pb(6,"div",4),i.Pb(7,"div",5),i.Ac(8),i.Ob(),i.Pb(9,"div",6),i.Pb(10,"a",7),i.Wb("click",function(){return t.addToCart()}),i.Kb(11,"img",8),i.Ob(),i.Ob(),i.Ob(),i.Ob()),2&e&&(i.xb(1),i.wc(t.getImageUrlBg(t.game)),i.xb(4),i.Bc(t.game.title),i.xb(3),i.Cc(" \u20ac",t.game.price," "))},styles:[".imageHolder[_ngcontent-%COMP%]{height:150px}.title[_ngcontent-%COMP%]{text-align:center;margin-top:15px;padding:5px}.title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#aaa}.pricecart[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.cart[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px}.price[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700}.game_element[_ngcontent-%COMP%]{position:relative;z-index:0;height:16rem;display:flex;flex-direction:column;background:#fff;margin:auto;border-radius:1.6rem;overflow:hidden;transition:all .2s ease-in-out 0s;max-width:16rem;width:150px;transform:translateZ(0);justify-content:space-between}"]}),e})();function R(e,t){if(1&e){const e=i.Qb();i.Pb(0,"pagination",7),i.Wb("ngModelChange",function(t){return i.qc(e),i.Zb().page=t})("pageChanged",function(t){return i.qc(e),i.Zb().pageChanged(t)}),i.Ob()}if(2&e){const e=i.Zb();i.gc("ngModel",e.page)("totalItems",e.games.length)}}function $(e,t){if(1&e){const e=i.Qb();i.Pb(0,"div",8),i.Pb(1,"app-game-list-element",9),i.Wb("AddedToCart",function(t){return i.qc(e),i.Zb().onAddedToCart(t)}),i.Ob(),i.Ob()}if(2&e){const e=t.$implicit;i.xb(1),i.gc("game",e)}}function j(e,t){if(1&e){const e=i.Qb();i.Pb(0,"pagination",7),i.Wb("ngModelChange",function(t){return i.qc(e),i.Zb().page=t})("pageChanged",function(t){return i.qc(e),i.Zb().pageChanged(t)}),i.Ob()}if(2&e){const e=i.Zb();i.gc("ngModel",e.page)("totalItems",e.games.length)}}let H=(()=>{class e{constructor(e){this.cartService=e,this.page=1,this.pageSize=12}get games(){return this._games}set games(e){this._games=e,e&&(this.pagedGames=e.length>this.pageSize?e.slice(0,this.pageSize):e)}ngOnInit(){}pageChanged(e){this.page=e.page;const t=(this.page-1)*this.pageSize;this.pagedGames=this.games.slice(t,Math.min(t+this.pageSize,this.games.length))}onAddedToCart(e){this.cartService.add(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Jb(P))},e.\u0275cmp=i.Db({type:e,selectors:[["app-game-list"]],inputs:{games:"games"},decls:9,vars:3,consts:[[1,"gamelistcontainer"],[1,"mt-4","row"],[1,"col-12"],[3,"ngModel","totalItems","ngModelChange","pageChanged",4,"ngIf"],[1,"row","games"],["class","col-3 games",4,"ngFor","ngForOf"],[1,"row"],[3,"ngModel","totalItems","ngModelChange","pageChanged"],[1,"col-3","games"],[3,"game","AddedToCart"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Pb(1,"div",1),i.Pb(2,"div",2),i.yc(3,R,1,2,"pagination",3),i.Ob(),i.Ob(),i.Pb(4,"div",4),i.yc(5,$,2,1,"div",5),i.Ob(),i.Pb(6,"div",6),i.Pb(7,"div",2),i.yc(8,j,1,2,"pagination",3),i.Ob(),i.Ob(),i.Ob()),2&e&&(i.xb(3),i.gc("ngIf",t.pagedGames&&t.games&&t.games.length>t.pageSize),i.xb(2),i.gc("ngForOf",t.pagedGames),i.xb(3),i.gc("ngIf",t.pagedGames&&t.games&&t.games.length>t.pageSize))},directives:[o.n,o.m,L.a,u.m,u.p,z],styles:[".games[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.gamelistcontainer[_ngcontent-%COMP%]{padding:10px}"]}),e})();function Q(e,t){if(1&e&&(i.Pb(0,"div",10),i.Ac(1),i.Ob()),2&e){const e=i.Zb();i.xb(1),i.Bc(e.errorMessage)}}function V(e,t){if(1&e){const e=i.Qb();i.Pb(0,"app-genre-selector",11),i.Wb("GenreSelected",function(t){return i.qc(e),i.Zb().onGenreSelected(t)}),i.Ob()}if(2&e){const e=i.Zb();i.gc("genres",e.homeModel.genres)}}function X(e,t){if(1&e){const e=i.Qb();i.Pb(0,"app-company-selector",12),i.Wb("CompanySelected",function(t){return i.qc(e),i.Zb().onCompanySelected(t)}),i.Ob()}if(2&e){const e=i.Zb();i.gc("companies",e.homeModel.companies)}}function Y(e,t){if(1&e&&i.Kb(0,"app-game-list",13),2&e){const e=i.Zb();i.gc("games",e.games)}}let ee=(()=>{class e{constructor(e,t){this.gameService=e,this.commonService=t,this.homeModel=new T,this.errorMessage=""}ngOnInit(){this.gameService.getGenres().subscribe(e=>this.homeModel.genres=e),this.gameService.getCompanies().subscribe(e=>this.homeModel.companies=e)}onGenreSelected(e){this.gameService.getByGenre(e.id).subscribe(e=>this.games=e,e=>this.errorMessage=this.commonService.getError(e))}onCompanySelected(e){this.gameService.getByCompany(e.id).subscribe(e=>this.games=e,e=>this.errorMessage=this.commonService.getError(e))}onSearch(e){this.gameService.search(e).subscribe(e=>this.games=e,e=>this.errorMessage=this.commonService.getError(e))}}return e.\u0275fac=function(t){return new(t||e)(i.Jb(A),i.Jb(g))},e.\u0275cmp=i.Db({type:e,selectors:[["app-home"]],decls:11,vars:4,consts:[[1,"container"],["class","alert alert-danger",4,"ngIf"],[3,"SearchActivated"],[1,"main"],[1,"sidebar"],[3,"genres","GenreSelected",4,"ngIf"],[1,"mt-2"],[3,"companies","CompanySelected",4,"ngIf"],[1,"content","mt-4"],[3,"games",4,"ngIf"],[1,"alert","alert-danger"],[3,"genres","GenreSelected"],[3,"companies","CompanySelected"],[3,"games"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Kb(1,"app-header"),i.yc(2,Q,2,1,"div",1),i.Pb(3,"app-search-bar",2),i.Wb("SearchActivated",function(e){return t.onSearch(e)}),i.Ob(),i.Pb(4,"div",3),i.Pb(5,"div",4),i.yc(6,V,1,1,"app-genre-selector",5),i.Pb(7,"div",6),i.yc(8,X,1,1,"app-company-selector",7),i.Ob(),i.Ob(),i.Pb(9,"div",8),i.yc(10,Y,1,1,"app-game-list",9),i.Ob(),i.Ob(),i.Ob()),2&e&&(i.xb(2),i.gc("ngIf",t.errorMessage),i.xb(4),i.gc("ngIf",t.homeModel),i.xb(2),i.gc("ngIf",t.homeModel),i.xb(2),i.gc("ngIf",t.games))},directives:[C,o.n,Z,J,N,H],styles:[""]}),e})(),te=(()=>{class e{constructor(e){this.httpService=e,this.api="api/order/"}create(e){return this.httpService.post(this.api,e)}}return e.\u0275fac=function(t){return new(t||e)(i.Tb(l))},e.\u0275prov=i.Fb({token:e,factory:e.\u0275fac}),e})(),ne=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Db({type:e,selectors:[["app-user-edit"]],inputs:{user:"user"},decls:20,vars:5,consts:[[1,"form-group"],["type","text",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Pb(1,"label"),i.Ac(2,"Firstname:"),i.Ob(),i.Pb(3,"input",1),i.Wb("ngModelChange",function(e){return t.user.firstname=e}),i.Ob(),i.Ob(),i.Pb(4,"div",0),i.Pb(5,"label"),i.Ac(6,"Lastname:"),i.Ob(),i.Pb(7,"input",1),i.Wb("ngModelChange",function(e){return t.user.lastname=e}),i.Ob(),i.Ob(),i.Pb(8,"div",0),i.Pb(9,"label"),i.Ac(10,"Address:"),i.Ob(),i.Pb(11,"input",1),i.Wb("ngModelChange",function(e){return t.user.address=e}),i.Ob(),i.Ob(),i.Pb(12,"div",0),i.Pb(13,"label"),i.Ac(14,"City:"),i.Ob(),i.Pb(15,"input",1),i.Wb("ngModelChange",function(e){return t.user.city=e}),i.Ob(),i.Ob(),i.Pb(16,"div",0),i.Pb(17,"label"),i.Ac(18,"Email:"),i.Ob(),i.Pb(19,"input",1),i.Wb("ngModelChange",function(e){return t.user.email=e}),i.Ob(),i.Ob()),2&e&&(i.xb(3),i.gc("ngModel",t.user.firstname),i.xb(4),i.gc("ngModel",t.user.lastname),i.xb(4),i.gc("ngModel",t.user.address),i.xb(4),i.gc("ngModel",t.user.city),i.xb(4),i.gc("ngModel",t.user.email))},directives:[u.c,u.m,u.p],styles:[""]}),e})();function ie(e,t){if(1&e&&(i.Pb(0,"div",13),i.Ac(1),i.Ob()),2&e){const e=i.Zb();i.xb(1),i.Bc(e.errorMessage)}}function re(e,t){if(1&e&&(i.Pb(0,"div",14),i.Ac(1),i.Ob()),2&e){const e=i.Zb();i.xb(1),i.Bc(e.successMessage)}}function se(e,t){if(1&e){const e=i.Qb();i.Pb(0,"tr"),i.Pb(1,"td"),i.Ac(2),i.Ob(),i.Pb(3,"td"),i.Ac(4),i.Ob(),i.Pb(5,"td"),i.Ac(6),i.Ob(),i.Pb(7,"td"),i.Pb(8,"input",15),i.Wb("ngModelChange",function(e){return t.$implicit.qty=e})("change",function(){i.qc(e);const n=t.$implicit;return i.Zb().onQtyChanged(n)}),i.Ob(),i.Ob(),i.Pb(9,"td"),i.Ac(10),i.Ob(),i.Pb(11,"td"),i.Pb(12,"button",16),i.Wb("click",function(){i.qc(e);const n=t.$implicit;return i.Zb().removeItem(n)}),i.Ac(13,"Remove"),i.Ob(),i.Ob(),i.Ob()}if(2&e){const e=t.$implicit,n=t.index;i.xb(2),i.Cc("",n+1,"."),i.xb(2),i.Bc(e.game.title),i.xb(2),i.Bc(e.game.price),i.xb(2),i.gc("ngModel",e.qty),i.xb(2),i.Bc(e.game.price*e.qty)}}function oe(e,t){if(1&e){const e=i.Qb();i.Nb(0),i.Pb(1,"h5"),i.Ac(2,"Customer info"),i.Ob(),i.Kb(3,"app-user-edit",17),i.Pb(4,"div",3),i.Pb(5,"button",18),i.Wb("click",function(){return i.qc(e),i.Zb().order()}),i.Ac(6,"Finish order"),i.Ob(),i.Ob(),i.Mb()}if(2&e){const e=i.Zb();i.xb(3),i.gc("user",e.user)}}const ce=[{path:"",component:ee},{path:"game/:id",component:q},{path:"admin/games",component:_},{path:"login",component:F},{path:"admin",component:E},{path:"cart",component:(()=>{class e{constructor(e,t,n){this.orderService=e,this.commonService=t,this.cartService=n,this.errorMessage="",this.successMessage="",this.user=new I}ngOnInit(){this.items=this.cartService.items}getTotal(){return this.items.map(e=>e.qty*e.game.price).reduce((e,t)=>e+t,0)}removeItem(e){this.cartService.remove(e.game.id)}onQtyChanged(e){this.cartService.save()}order(){const e=new k;e.user=this.user,e.details=this.items.map(e=>({idGame:e.game.id,quantity:e.qty,unitprice:e.game.price,id:0,idOrder:0})),this.orderService.create(e).subscribe(()=>{this.successMessage="Order successfully created",this.cartService.clear()},e=>this.errorMessage=this.commonService.getError(e))}}return e.\u0275fac=function(t){return new(t||e)(i.Jb(te),i.Jb(g),i.Jb(P))},e.\u0275cmp=i.Db({type:e,selectors:[["app-shopping-cart"]],decls:33,vars:7,consts:[[1,"container"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"mt-2"],[1,"mt-2","row"],[1,"col-sm-8"],[1,"table","table-striped"],[2,"width","40%"],[2,"width","15%"],[4,"ngFor","ngForOf"],["colspan","4",1,"text-right"],[1,"col-sm-4"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["type","number","min","1",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"user"],[1,"btn","btn-lg","btn-success",3,"click"]],template:function(e,t){1&e&&(i.Pb(0,"div",0),i.Kb(1,"app-header"),i.yc(2,ie,2,1,"div",1),i.yc(3,re,2,1,"div",2),i.Pb(4,"h4",3),i.Ac(5,"Your shopping cart"),i.Ob(),i.Pb(6,"div",4),i.Pb(7,"div",5),i.Pb(8,"table",6),i.Pb(9,"thead"),i.Pb(10,"tr"),i.Kb(11,"th"),i.Pb(12,"th",7),i.Ac(13,"Game"),i.Ob(),i.Pb(14,"th"),i.Ac(15,"Price"),i.Ob(),i.Pb(16,"th",8),i.Ac(17,"Qty"),i.Ob(),i.Pb(18,"th"),i.Ac(19,"Total"),i.Ob(),i.Kb(20,"th"),i.Ob(),i.Ob(),i.Pb(21,"tbody"),i.yc(22,se,14,5,"tr",9),i.Ob(),i.Pb(23,"tfoot"),i.Pb(24,"tr"),i.Pb(25,"td",10),i.Ac(26,"Total:"),i.Ob(),i.Pb(27,"td"),i.Ac(28),i.ac(29,"number"),i.Ob(),i.Kb(30,"td"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Pb(31,"div",11),i.yc(32,oe,7,1,"ng-container",12),i.Ob(),i.Ob(),i.Ob()),2&e&&(i.xb(2),i.gc("ngIf",t.errorMessage),i.xb(1),i.gc("ngIf",t.successMessage),i.xb(19),i.gc("ngForOf",t.items),i.xb(6),i.Bc(i.bc(29,5,t.getTotal())),i.xb(4),i.gc("ngIf",t.items.length>0))},directives:[C,o.n,o.m,u.r,u.c,u.m,u.p,ne],pipes:[o.g],styles:[""]}),e})()}];let ae=(()=>{class e{}return e.\u0275mod=i.Hb({type:e}),e.\u0275inj=i.Gb({factory:function(t){return new(t||e)},imports:[[s.d.forRoot(ce)],s.d]}),e})(),de=(()=>{class e{constructor(){this.title="gameshopApp"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Db({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&i.Kb(0,"router-outlet")},directives:[s.e],styles:[""]}),e})(),le=(()=>{class e{}return e.\u0275mod=i.Hb({type:e,bootstrap:[de]}),e.\u0275inj=i.Gb({factory:function(t){return new(t||e)},providers:[A,l,d,a.a,g,P,b,te],imports:[[r.a,ae,u.h,a.b,L.b,w.a,M.b.forRoot(),p.b.forRoot()]]}),e})();Object(i.R)(),r.b().bootstrapModule(le).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0,4]]]);